{
  "repository": {
    "name": "repo-explainer",
    "path": "/Users/saadkhalid/Projects/repo-explainer",
    "primary_language": "python",
    "languages": ["python"],
    "entry_points": ["src/repo_explainer/cli.py"]
  },
  "components": [
    {
      "component_id": "cli",
      "name": "CLI Module",
      "type": "module",
      "file_path": "src/repo_explainer/cli.py",
      "line_range": {"start": 1, "end": 321},
      "description": "Handles user commands, command-line arguments, and orchestrates the analysis workflow.",
      "key_functions": [
        {
          "name": "analyze",
          "file_path": "src/repo_explainer/cli.py",
          "line_range": {"start": 44, "end": 284},
          "signature": "def analyze(repo_path_or_url, depth, output, force_clone, verbose)",
          "purpose": "Main command for repository analysis and doc generation."
        },
        {
          "name": "main",
          "file_path": "src/repo_explainer/cli.py",
          "line_range": {"start": 33, "end": 40},
          "signature": "def main(version)",
          "purpose": "Typer callback for version and global options."
        }
      ],
      "dependencies": {
        "internal": ["repository-loader", "opencode-service", "output-manager", "config"],
        "external": ["typer", "rich"]
      }
    },
    {
      "component_id": "repository-loader",
      "name": "Repository Loader",
      "type": "module",
      "file_path": "src/repo_explainer/repository_loader.py",
      "line_range": {"start": 1, "end": 215},
      "description": "Responsible for loading local repositories or cloning remote ones.",
      "key_functions": [
        {
          "name": "load",
          "file_path": "src/repo_explainer/repository_loader.py",
          "line_range": {"start": 163, "end": 189},
          "signature": "def load(self, path_or_url: str, force_clone: bool = False) -> Path",
          "purpose": "Loads a repository from a local path or Git URL."
        },
        {
          "name": "clone_repository",
          "file_path": "src/repo_explainer/repository_loader.py",
          "line_range": {"start": 120, "end": 162},
          "signature": "def clone_repository(self, git_url: str, force: bool = False) -> Path",
          "purpose": "Clones a Git repository to the tmp directory."
        }
      ],
      "dependencies": {
        "internal": [],
        "external": ["GitPython"]
      }
    },
    {
      "component_id": "opencode-service",
      "name": "OpenCode Service",
      "type": "module",
      "file_path": "src/repo_explainer/opencode_service.py",
      "line_range": {"start": 1, "end": 242},
      "description": "Manages communication with the OpenCode CLI, handles streaming output, and parses JSON events.",
      "key_functions": [
        {
          "name": "run_command",
          "file_path": "src/repo_explainer/opencode_service.py",
          "line_range": {"start": 56, "end": 148},
          "signature": "def run_command(self, prompt, command, event_callback)",
          "purpose": "Executes OpenCode CLI commands and monitors output."
        },
        {
          "name": "analyze_architecture",
          "file_path": "src/repo_explainer/opencode_service.py",
          "line_range": {"start": 150, "end": 167},
          "signature": "def analyze_architecture(self, event_callback)",
          "purpose": "Runs comprehensive architecture analysis."
        }
      ],
      "dependencies": {
        "internal": ["config", "prompts"],
        "external": []
      }
    },
    {
      "component_id": "output-manager",
      "name": "Output Manager",
      "type": "module",
      "file_path": "src/repo_explainer/output_manager.py",
      "line_range": {"start": 1, "end": 268},
      "description": "Handles writing analysis results to the filesystem and organizing generated documentation.",
      "key_functions": [
        {
          "name": "write_analysis_result",
          "file_path": "src/repo_explainer/output_manager.py",
          "line_range": {"start": 51, "end": 127},
          "signature": "def write_analysis_result(self, result, repo_path, depth)",
          "purpose": "Saves analysis output and orchestrates documentation composition."
        }
      ],
      "dependencies": {
        "internal": ["doc-composer"],
        "external": []
      }
    },
    {
      "component_id": "doc-composer",
      "name": "Document Composer",
      "type": "module",
      "file_path": "src/repo_explainer/doc_composer.py",
      "line_range": {"start": 1, "end": 1187},
      "description": "Composes coherent documentation from raw analysis artifacts.",
      "key_functions": [
        {
          "name": "compose",
          "file_path": "src/repo_explainer/doc_composer.py",
          "line_range": {"start": 30, "end": 99},
          "signature": "def compose(self, repo_path, depth, session_id, timestamp)",
          "purpose": "Orchestrates the conversion of raw artifacts to structured documentation."
        },
        {
          "name": "_render_diagrams",
          "file_path": "src/repo_explainer/doc_composer.py",
          "line_range": {"start": 101, "end": 192},
          "signature": "def _render_diagrams(self)",
          "purpose": "Renders Mermaid diagrams to SVG using mermaid-cli."
        }
      ],
      "dependencies": {
        "internal": [],
        "external": []
      }
    }
  ]
}
