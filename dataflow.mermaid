flowchart TD
    Start([User Input]) --> CLI[CLI Arguments Parsing]
    CLI --> Init[Initialize Orchestrator]
    
    Init --> Load[Load Repository]
    Load --> Source[Source Code Files]
    
    Source --> Analyze[Static Analysis (Tree-sitter)]
    Analyze --> Context[Analysis Context / Component Graph]
    
    Context --> AI{AI Provider?}
    
    AI -- OpenCode --> Agent[Run OpenCode Agent]
    AI -- Claude --> Claude[Run Claude Agent]
    AI -- LLM --> API[Direct LLM API]
    
    Agent --> Insights[Architectural Insights & Diagrams]
    Claude --> Insights
    API --> Insights
    
    Context --> Merge[Merge Structural & AI Data]
    Insights --> Merge
    
    Merge --> GenDocs[Generate Markdown]
    Merge --> GenDiag[Generate Diagrams]
    
    GenDocs --> Write[Write to Output Dir]
    GenDiag --> Write
    
    Write --> End([Final Documentation])
