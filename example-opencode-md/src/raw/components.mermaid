graph TD
    subgraph "Presentation Layer"
        CLI[CLI Entry Point<br/>src/repo_explainer/cli.py]
    end

    subgraph "Service Layer"
        RL[Repository Loader<br/>src/repo_explainer/repository_loader.py]
        OCS[OpenCode Service<br/>src/repo_explainer/opencode_service.py]
    end

    subgraph "Data & Composition"
        OM[Output Manager<br/>src/repo_explainer/output_manager.py]
        DC[Doc Composer<br/>src/repo_explainer/doc_composer.py]
        PROMPTS[Prompt Templates<br/>src/repo_explainer/prompts.py]
        CONFIG[Settings & Config<br/>src/repo_explainer/config.py]
    end

    subgraph "External Systems"
        OC_CLI[[OpenCode CLI Binary]]
        MM_CLI[[Mermaid CLI Binary]]
        GIT[[Git Binary]]
    end

    CLI --> RL
    CLI --> OCS
    CLI --> OM
    CLI --> CONFIG

    OCS --> PROMPTS
    OCS --> OC_CLI
    OCS --> CONFIG

    RL --> GIT

    OM --> DC
    DC --> MM_CLI
    DC --> OC_CLI
