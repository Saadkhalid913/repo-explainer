<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Components Overview - kubernetes-exhaustive</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../index.html">kubernetes-exhaustive</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../index.html" class="nav-link">Repository Analysis</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Components</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="overview.html" class="dropdown-item active" aria-current="page">Components Overview</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Dataflow</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../dataflow/overview.html" class="dropdown-item">Data Flow</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Src</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../src/ANALYSIS_SUMMARY.html" class="dropdown-item">Repository Analysis Summary</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#" class="dropdown-item">Raw</a>
    <ul class="dropdown-menu">
            
<li>
    <a href="../src/raw/architecture.html" class="dropdown-item">Kubernetes Architecture</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Tech stack</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../tech-stack/overview.html" class="dropdown-item">Technology Stack</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../index.html" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../dataflow/overview.html" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#components-overview" class="nav-link">Components Overview</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#architecture-overview" class="nav-link">Architecture Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#architecture-overview_1" class="nav-link">Architecture Overview</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#kubernetes-architecture" class="nav-link">Kubernetes Architecture</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#executive-summary" class="nav-link">Executive Summary</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#system-purpose-design-philosophy" class="nav-link">System Purpose &amp; Design Philosophy</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#architecture-at-a-glance" class="nav-link">Architecture at a Glance</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#detailed-component-analysis" class="nav-link">Detailed Component Analysis</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#data-flow-communication" class="nav-link">Data Flow &amp; Communication</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#directory-structure-guide" class="nav-link">Directory Structure Guide</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#key-interfaces-abstractions" class="nav-link">Key Interfaces &amp; Abstractions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#development-guide" class="nav-link">Development Guide</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#glossary" class="nav-link">Glossary</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#component-diagram" class="nav-link">Component Diagram</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="components-overview">Components Overview</h1>
<h2 id="architecture-overview">Architecture Overview</h2>
<h2 id="architecture-overview_1">Architecture Overview</h2>
<h1 id="kubernetes-architecture">Kubernetes Architecture</h1>
<h2 id="executive-summary">Executive Summary</h2>
<p>Kubernetes is a production-grade container orchestration system designed to automate the deployment, scaling, and management of containerized applications. It provides a platform-agnostic way to manage clusters of hosts (nodes) and the workloads running on them.</p>
<p>The system follows a <strong>decoupled, asynchronous, and declarative</strong> design. Users describe the "desired state" of the system through the API, and various independent controllers work continuously to transition the "actual state" toward that desired state. This reconciliation loop is the fundamental pattern of Kubernetes.</p>
<h2 id="system-purpose-design-philosophy">System Purpose &amp; Design Philosophy</h2>
<ul>
<li><strong>Problem Solved:</strong> Managing microservices at scale, handling failures automatically, and optimizing resource utilization across a cluster of machines.</li>
<li><strong>Design Goals:</strong> <ul>
<li><strong>Scalability:</strong> Capable of managing thousands of nodes and tens of thousands of pods.</li>
<li><strong>High Availability:</strong> No single point of failure in the control plane.</li>
<li><strong>Extensibility:</strong> Almost every component can be replaced or extended (CRDs, Admission Webhooks, CNI, CSI).</li>
<li><strong>Portability:</strong> Runs on public clouds, private clouds, and bare metal.</li>
</ul>
</li>
</ul>
<h2 id="architecture-at-a-glance">Architecture at a Glance</h2>
<h3 id="architectural-style">Architectural Style</h3>
<p>Kubernetes uses a <strong>Modular Monorepo</strong> structure. It is composed of a central <strong>Control Plane</strong> that manages the cluster and a set of <strong>Nodes</strong> that run the actual workloads. Communication is centralized through the API Server; no other control plane component talks directly to etcd or to each other.</p>
<h3 id="core-subsystems">Core Subsystems</h3>
<ul>
<li><strong>API Server</strong> (<code>cmd/kube-apiserver</code>) - The central gateway for all cluster operations.</li>
<li><strong>etcd</strong> (External) - Distributed storage for cluster state.</li>
<li><strong>Scheduler</strong> (<code>cmd/kube-scheduler</code>) - Decides where to place workloads.</li>
<li><strong>Controller Manager</strong> (<code>cmd/kube-controller-manager</code>) - Handles routine cluster tasks (node management, replication).</li>
<li><strong>Kubelet</strong> (<code>cmd/kubelet</code>) - The primary agent running on each node.</li>
<li><strong>Kube Proxy</strong> (<code>cmd/kube-proxy</code>) - Manages network rules on nodes.</li>
</ul>
<h2 id="detailed-component-analysis">Detailed Component Analysis</h2>
<h3 id="component-api-server">Component: API Server</h3>
<p><strong>Purpose:</strong> Serves the Kubernetes API and acts as the "brain" of the cluster.
<strong>Location:</strong> <code>cmd/kube-apiserver</code>
<strong>Key Responsibilities:</strong>
- Validates and configures data for API objects.
- Provides RESTful entry points for clients and other components.
- Manages authentication, authorization, and admission control.
- Directly interacts with etcd for persistence.
<strong>Core Abstractions:</strong>
- <code>GenericAPIServer</code> - The base server logic.
- <code>Registry</code> - Logic for storing and retrieving objects from etcd.
<strong>Entry Points:</strong>
- <code>cmd/kube-apiserver/main.go</code> -&gt; <code>app.NewAPIServerCommand()</code></p>
<h3 id="component-scheduler">Component: Scheduler</h3>
<p><strong>Purpose:</strong> Assigns unscheduled Pods to Nodes.
<strong>Location:</strong> <code>cmd/kube-scheduler</code>
<strong>Key Responsibilities:</strong>
- Filters nodes (Predicates) based on resource requirements, constraints, and affinity.
- Ranks remaining nodes (Priorities) to find the best fit.
- Updates the Pod object with the selected Node name (Binding).
<strong>Extension Points:</strong>
- <strong>Scheduling Framework</strong> - Allows adding custom plugins for sorting, filtering, and scoring nodes.</p>
<h3 id="component-kubelet">Component: Kubelet</h3>
<p><strong>Purpose:</strong> Ensures that containers are running in a Pod on a specific node.
<strong>Location:</strong> <code>cmd/kubelet</code>
<strong>Key Responsibilities:</strong>
- Watches the API Server for Pods assigned to its node.
- Interacts with the Container Runtime (via CRI) to start/stop containers.
- Reports node and pod status back to the API Server.
- Performs health checks (Liveness/Readiness probes).
<strong>Interactions:</strong>
- Consumes: Pod definitions from API Server.
- Provides: Container management on the host.</p>
<h3 id="component-controller-manager">Component: Controller Manager</h3>
<p><strong>Purpose:</strong> Runs controller processes that regulate the state of the cluster.
<strong>Location:</strong> <code>cmd/kube-controller-manager</code>
<strong>Key Responsibilities:</strong>
- <strong>Node Controller:</strong> Notices when nodes go down.
- <strong>Job Controller:</strong> Watches for Job objects and creates Pods to run them.
- <strong>EndpointSlice Controller:</strong> Populates EndpointSlices for services.</p>
<h2 id="data-flow-communication">Data Flow &amp; Communication</h2>
<h3 id="primary-data-flows">Primary Data Flows</h3>
<ol>
<li><strong>Desired State Update:</strong> User -&gt; kubectl -&gt; API Server -&gt; etcd.</li>
<li><strong>Scheduling Loop:</strong> API Server (Watch) -&gt; Scheduler -&gt; API Server (Binding) -&gt; etcd.</li>
<li><strong>Execution Loop:</strong> API Server (Watch) -&gt; Kubelet -&gt; Container Runtime (CRI).</li>
</ol>
<h3 id="communication-patterns">Communication Patterns</h3>
<ul>
<li><strong>Synchronous:</strong> REST over HTTP/gRPC for API calls.</li>
<li><strong>Asynchronous:</strong> The <strong>Watch</strong> mechanism allows components to be notified of changes in real-time without polling.</li>
<li><strong>Persistence:</strong> All cluster state is stored in <strong>etcd</strong>.</li>
</ul>
<h2 id="directory-structure-guide">Directory Structure Guide</h2>
<pre><code>kubernetes/
├── cmd/                    # Entry points for all binaries
│   ├── kube-apiserver/     # Control plane API server
│   ├── kubelet/            # Node agent
│   └── kubectl/            # CLI tool
├── pkg/                    # Core library code (private to this repo)
│   ├── apis/               # Internal API types and conversions
│   ├── controller/         # Logic for various controllers
│   └── kubelet/            # Detailed implementation of the kubelet
├── api/                    # OpenAPI and Swagger definitions
├── staging/                # Published libraries (k8s.io/*)
│   ├── src/k8s.io/api/     # Versioned API types
│   ├── src/k8s.io/client-go/# Go client library
│   └── src/k8s.io/apiserver/# API server framework
├── test/                   # Integration and E2E tests
└── hack/                   # Scripts for building, linting, and codegen
</code></pre>
<h2 id="key-interfaces-abstractions">Key Interfaces &amp; Abstractions</h2>
<h3 id="interface-cri-container-runtime-interface">Interface: CRI (Container Runtime Interface)</h3>
<p><strong>Location:</strong> <code>staging/src/k8s.io/cri-api/pkg/apis/services.go</code> (approx)
<strong>Purpose:</strong> Standard interface between the Kubelet and the container runtime.
<strong>Implementations:</strong> containerd, CRI-O, Docker (via shim).</p>
<h3 id="interface-informer">Interface: Informer</h3>
<p><strong>Location:</strong> <code>staging/src/k8s.io/client-go/informers/</code>
<strong>Purpose:</strong> Provides a local cache and event notifications for API objects to minimize API server load.</p>
<h2 id="development-guide">Development Guide</h2>
<h3 id="building">Building</h3>
<p>Use the provided Makefile:</p>
<pre><code class="language-bash">make
</code></pre>
<p>To build a specific component:</p>
<pre><code class="language-bash">make WHAT=cmd/kube-apiserver
</code></pre>
<h3 id="testing">Testing</h3>
<ul>
<li><strong>Unit Tests:</strong> <code>go test ./pkg/scheduler/...</code></li>
<li><strong>Integration Tests:</strong> <code>make test-integration</code></li>
<li><strong>E2E Tests:</strong> Use <code>hack/ginkgo-e2e.sh</code> or <code>kind</code>.</li>
</ul>
<h2 id="glossary">Glossary</h2>
<ul>
<li><strong>Pod:</strong> The smallest deployable unit in Kubernetes, containing one or more containers.</li>
<li><strong>Node:</strong> A worker machine (VM or physical) in the cluster.</li>
<li><strong>CRD (Custom Resource Definition):</strong> A way to extend the Kubernetes API with your own objects.</li>
<li><strong>Admission Controller:</strong> A piece of code that intercepts requests to the API server prior to persistence.</li>
</ul>
<h2 id="component-diagram">Component Diagram</h2>
<p><img alt="Component Diagram" src="../diagrams/components.png" /></p>
<details>
<summary>View Mermaid Source</summary>


<pre><code class="language-mermaid">graph TB
    subgraph &quot;Control Plane&quot;
        API[API Server&lt;br/&gt;cmd/kube-apiserver]
        Scheduler[Scheduler&lt;br/&gt;cmd/kube-scheduler]
        CM[Controller Manager&lt;br/&gt;cmd/kube-controller-manager]
        etcd[(etcd&lt;br/&gt;External)]
    end

    subgraph &quot;Node Components&quot;
        Kubelet[Kubelet&lt;br/&gt;cmd/kubelet]
        Proxy[Kube Proxy&lt;br/&gt;cmd/kube-proxy]
        Runtime[Container Runtime&lt;br/&gt;External/CRI]
    end

    subgraph &quot;Client Tools&quot;
        kubectl[kubectl&lt;br/&gt;cmd/kubectl]
    end

    subgraph &quot;Cloud Integration&quot;
        CCM[Cloud Controller Manager&lt;br/&gt;cmd/cloud-controller-manager]
    end

    kubectl --&gt;|REST API| API
    API --&gt;|Persist| etcd
    API --&gt;|Watch/Update| Scheduler
    API --&gt;|Watch/Update| CM
    API --&gt;|Watch/Update| CCM
    API --&gt;|Watch/Update| Kubelet
    Kubelet --&gt;|Status| API
    Kubelet --&gt;|CRI| Runtime
    Kubelet --&gt;|Manage| Proxy
    Proxy --&gt;|Network Rules| Runtime

</code></pre>

</details></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
